<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arches - Discover the Best Food</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ea6100 0%, #ff8c42 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .screen {
            display: none;
            padding: 20px;
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .screen.active {
            display: block;
        }

        .header {
            text-align: center;
            padding: 40px 0 30px;
        }

        .logo {
            font-size: 32px;
            font-weight: bold;
            color: #ea6100;
            margin-bottom: 10px;
            font-family: 'Georgia', serif;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 16px;
            font-style: italic;
        }

        .search-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .search-bar {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            font-size: 16px;
            background: white;
        }

        .search-bar:focus {
            outline: none;
            border-color: #ea6100;
            box-shadow: 0 0 0 3px rgba(234, 97, 0, 0.1);
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: #ea6100;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn:hover {
            background: #d1560a;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .category-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-card:hover {
            border-color: #ea6100;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .category-emoji {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .category-name {
            font-weight: 600;
            color: #ea6100;
        }

        .result-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s;
        }

        .result-card:hover {
            border-color: #ea6100;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            transform: translateY(-2px);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .restaurant-name {
            font-weight: 700;
            font-size: 18px;
            color: #ea6100;
            margin-bottom: 4px;
        }

        .distance {
            color: #7f8c8d;
            font-size: 14px;
        }

        .rating-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stars {
            color: #f39c12;
            font-size: 16px;
        }

        .rating-text {
            font-size: 14px;
            color: #7f8c8d;
        }

        .item-info {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
        }

        .item-name {
            font-weight: 600;
            color: #ea6100;
            margin-bottom: 4px;
        }

        .item-price {
            color: #27ae60;
            font-weight: 600;
        }

        .recent-review {
            font-style: italic;
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 8px;
        }

        .detail-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            margin-bottom: 20px;
        }

        .detail-info {
            margin-bottom: 20px;
        }

        .detail-title {
            font-size: 24px;
            font-weight: 700;
            color: #ea6100;
            margin-bottom: 8px;
        }

        .detail-subtitle {
            font-size: 18px;
            color: #7f8c8d;
            margin-bottom: 16px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 20px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #ea6100;
        }

        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 4px;
        }

        .reviews-section {
            margin-top: 30px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #ea6100;
        }

        .review-card {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .reviewer-name {
            font-weight: 600;
            color: #ea6100;
        }

        .review-date {
            font-size: 12px;
            color: #7f8c8d;
        }

        .review-text {
            color: #495057;
            line-height: 1.4;
        }

        .rating-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ea6100;
        }

        .star-rating {
            display: flex;
            gap: 8px;
            font-size: 32px;
            margin-bottom: 16px;
        }

        .star {
            color: #dee2e6;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active {
            color: #f39c12;
        }

        .star:hover {
            color: #f39c12;
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
        }

        textarea:focus {
            outline: none;
            border-color: #ea6100;
        }

        .navigation {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            background: white;
            border-top: 2px solid #e9ecef;
            display: flex;
            padding: 12px 0;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 8px;
            color: #7f8c8d;
            cursor: pointer;
            transition: color 0.3s;
            font-size: 14px;
        }

        .nav-item.active {
            color: #ea6100;
            font-weight: 600;
        }

        .nav-item:hover {
            color: #ea6100;
        }

        .back-btn {
            background: none;
            border: none;
            color: #ea6100;
            font-size: 16px;
            cursor: pointer;
            padding: 8px 0;
            margin-bottom: 20px;
        }

        .story-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            border-left: 4px solid #ea6100;
        }

        .success-message {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            margin: 20px 0;
        }

        .photo-upload {
            border: 2px dashed #dee2e6;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin: 16px 0;
        }

        .photo-upload:hover {
            border-color: #ea6100;
            background: #f8f9fa;
        }

        .photo-placeholder {
            font-size: 48px;
            color: #dee2e6;
            margin-bottom: 12px;
        }

        .favorites-grid {
            display: grid;
            gap: 16px;
            margin: 20px 0;
        }

        .favorite-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s;
        }

        .favorite-card:hover {
            border-color: #ea6100;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        }

        .favorite-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 12px;
        }

        .favorite-emoji {
            font-size: 32px;
            margin-right: 12px;
        }

        .favorite-info {
            flex: 1;
        }

        .favorite-name {
            font-weight: 600;
            color: #ea6100;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .favorite-restaurant {
            color: #7f8c8d;
            font-size: 14px;
        }

        .heart-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #ea6100;
            transition: transform 0.2s;
        }

        .heart-btn:hover {
            transform: scale(1.1);
        }

        .filter-section {
            display: flex;
            gap: 8px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background: #ea6100;
            color: white;
            border-color: #ea6100;
        }

        .filter-btn:hover {
            border-color: #ea6100;
        }

        @media (max-width: 480px) {
            .container {
                max-width: 100%;
                margin: 0;
            }
            
            .screen {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div class="screen active" id="welcome-screen">
            <div class="header">
                <div class="logo">Arches</div>
                <div class="subtitle">Discover the best food in your area</div>
            </div>

            <div class="search-container">
                <h3 style="margin-bottom: 8px; color: #ea6100;">What are you craving?</h3>
                <p style="font-size: 14px; color: #7f8c8d; margin-bottom: 16px;">We will show you the best options!</p>
                <input type="text" class="search-bar" placeholder="Try 'taco' or 'pizza slice'" id="welcome-search">
                <button class="btn" onclick="performSearch()">Search Near Me</button>
            </div>

            <div class="categories">
                <div class="category-card" onclick="searchCategory('taco')">
                    <div class="category-emoji">üåÆ</div>
                    <div class="category-name">Tacos</div>
                </div>
                <div class="category-card" onclick="searchCategory('pizza')">
                    <div class="category-emoji">üçï</div>
                    <div class="category-name">Pizza</div>
                </div>
                <div class="category-card" onclick="searchCategory('coffee')">
                    <div class="category-emoji">‚òï</div>
                    <div class="category-name">Coffee</div>
                </div>
                <div class="category-card" onclick="searchCategory('burger')">
                    <div class="category-emoji">üçî</div>
                    <div class="category-name">Burgers</div>
                </div>
                <div class="category-card" onclick="searchCategory('sushi')">
                    <div class="category-emoji">üç£</div>
                    <div class="category-name">Sushi</div>
                </div>
                <div class="category-card" onclick="searchCategory('wings')">
                    <div class="category-emoji">üçó</div>
                    <div class="category-name">Wings</div>
                </div>
            </div>
        </div>

        <!-- Search Results Screen -->
        <div class="screen" id="results-screen">
            <button class="back-btn" onclick="showScreen('welcome-screen')">‚Üê Back to Search</button>
            
            <div class="header" style="padding: 20px 0;">
                <h2 style="color: #ea6100;" id="results-title">Tacos near you</h2>
                <div class="subtitle" id="results-subtitle">Found 3 places with highly rated tacos</div>
            </div>

            <div class="filter-section">
                <div class="filter-btn active" onclick="filterResults('all')">All</div>
                <div class="filter-btn" onclick="filterResults('rating')">Highest Rated</div>
                <div class="filter-btn" onclick="filterResults('price')">Best Value</div>
                <div class="filter-btn" onclick="filterResults('distance')">Closest</div>
            </div>

            <div id="results-container">
                <!-- Results will be populated by JavaScript -->
            </div>
        </div>

        <!-- Item Detail Screen -->
        <div class="screen" id="detail-screen">
            <button class="back-btn" onclick="showScreen('results-screen')">‚Üê Back to Results</button>
            
            <div class="detail-image" id="detail-image">üåÆ</div>
            
            <div class="detail-info">
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <div class="detail-title" id="detail-title">Carnitas Taco</div>
                        <div class="detail-subtitle" id="detail-subtitle">at El Coraz√≥n</div>
                    </div>
                    <button class="heart-btn" id="favorite-btn" onclick="toggleFavorite()">ü§ç</button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="detail-rating">4.8</div>
                        <div class="stat-label">Rating</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="detail-price">$3.50</div>
                        <div class="stat-label">Price</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="detail-reviews">23</div>
                        <div class="stat-label">Reviews</div>
                    </div>
                </div>
            </div>

            <button class="btn" onclick="showScreen('rating-screen')">Rate This Item</button>
            <button class="btn btn-secondary" onclick="getDirections()">Get Directions</button>

            <div class="reviews-section">
                <div class="section-title">Recent Reviews</div>
                <div id="reviews-container">
                    <!-- Reviews will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Rating Screen -->
        <div class="screen" id="rating-screen">
            <button class="back-btn" onclick="showScreen('detail-screen')">‚Üê Back</button>
            
            <div class="header">
                <h2 style="color: #ea6100;">Rate This Item</h2>
                <div class="subtitle">Help others discover great food</div>
            </div>

            <div class="rating-form">
                <div class="item-info">
                    <div class="item-name" id="rating-item-name">Carnitas Taco</div>
                    <div style="color: #7f8c8d;">at <span id="rating-restaurant-name">El Coraz√≥n</span></div>
                </div>

                <div class="form-group">
                    <div class="form-label">How was it?</div>
                    <div class="star-rating" id="star-rating">
                        <span class="star" data-rating="1">‚òÖ</span>
                        <span class="star" data-rating="2">‚òÖ</span>
                        <span class="star" data-rating="3">‚òÖ</span>
                        <span class="star" data-rating="4">‚òÖ</span>
                        <span class="star" data-rating="5">‚òÖ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="review-text">Your Review (Optional)</label>
                    <textarea id="review-text" placeholder="Tell others what made this special..."></textarea>
                </div>

                <div class="form-group">
                    <div class="form-label">Add a Photo (Optional)</div>
                    <div class="photo-upload" onclick="selectPhoto()">
                        <div class="photo-placeholder">üì∑</div>
                        <div style="color: #7f8c8d;">Tap to add photo</div>
                    </div>
                </div>

                <button class="btn" onclick="submitRating()" id="submit-rating" disabled>Submit Rating</button>
            </div>
        </div>

        <!-- Favorites Screen -->
        <div class="screen" id="favorites-screen">
            <div class="header">
                <div class="logo">‚ù§Ô∏è Favorites</div>
                <div class="subtitle">Your saved discoveries</div>
            </div>

            <div id="favorites-empty" style="text-align: center; padding: 60px 20px; color: #7f8c8d;">
                <div style="font-size: 64px; margin-bottom: 20px;">ü§ç</div>
                <h3 style="margin-bottom: 12px; color: #ea6100;">No favorites yet</h3>
                <p>Start exploring and tap the heart icon on items you love!</p>
                <button class="btn" onclick="showScreen('welcome-screen')" style="margin-top: 20px; max-width: 200px;">Start Discovering</button>
            </div>

            <div class="favorites-grid" id="favorites-container">
                <!-- Favorites will be populated by JavaScript -->
            </div>
        </div>

        <!-- FAQ Screen -->
        <div class="screen" id="faq-screen">
            <button class="back-btn" onclick="showScreen('welcome-screen')">‚Üê Back</button>
            
            <div class="header">
                <div class="logo">FAQ</div>
                <div class="subtitle">Everything about Arches</div>
            </div>

            <div style="line-height: 1.6; color: #495057;">
                <div class="story-section">
                    <h3 style="color: #ea6100; margin-bottom: 16px;">Inspired by Archestratus</h3>
                    <p style="margin-bottom: 16px;">
                        Archestratus of Gela (4th century BCE) was the world's first food critic and the author of "Hedypatheia" (Life of Luxury), the earliest known cookbook and food guide.
                    </p>
                    <p style="margin-bottom: 16px;">
                        He traveled across the ancient Mediterranean world, from Sicily to the Black Sea, documenting the finest foods and where to find them. His work was the first systematic approach to food quality and regional specialties.
                    </p>
                    <p style="margin-bottom: 16px;">
                        Today, Arches continues his mission. Instead of one person traveling the world, we use the collective wisdom of local food lovers to discover the best dishes in every neighborhood.
                    </p>
                </div>

                <h3 style="color: #ea6100; margin-bottom: 16px;">How does Arches work?</h3>
                <p style="margin-bottom: 16px;">
                    ‚Ä¢ Search for specific food items, not just restaurants<br>
                    ‚Ä¢ See ratings for individual dishes at each location<br>
                    ‚Ä¢ Discover hidden gems through community recommendations<br>
                    ‚Ä¢ Rate and review specific items to help others<br>
                    ‚Ä¢ Save your favorites for easy access
                </p>

                <h3 style="color: #ea6100; margin-bottom: 16px;">Is Arches free to use?</h3>
                <p style="margin-bottom: 16px;">
                    Yes! Arches is free to use. You can search for food items, view ratings, save favorites, and add your own reviews at no cost.
                </p>

                <h3 style="color: #ea6100; margin-bottom: 16px;">How do I add a review?</h3>
                <p style="margin-bottom: 16px;">
                    Simply search for a food item, select the restaurant, and tap "Rate This Item." You can give a star rating and write a short review to help other food lovers.
                </p>

                <h3 style="color: #ea6100; margin-bottom: 16px;">What makes Arches different?</h3>
                <p style="margin-bottom: 24px;">
                    Unlike other apps that focus on restaurants, Arches focuses on specific food items. This means you can find the best croissant in your area, even if it's from a small caf√© that isn't well-known overall.
                </p>
            </div>

            <button class="btn" onclick="showScreen('welcome-screen')">Start Discovering</button>
        </div>

        <!-- Success Screen -->
        <div class="screen" id="success-screen">
            <div class="header">
                <div class="logo">Thank You!</div>
                <div class="subtitle">Your review helps the community</div>
            </div>

            <div class="success-message">
                <h3 style="margin-bottom: 12px;">Rating Submitted Successfully!</h3>
                <p>Your review has been added to help other food lovers discover great options.</p>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <div style="font-size: 64px; margin-bottom: 16px;">üéâ</div>
                <p style="color: #7f8c8d;">Just like Archestratus, you're helping others find exceptional food!</p>
            </div>

            <button class="btn" onclick="showScreen('welcome-screen')">Discover More Food</button>
            <button class="btn btn-secondary" onclick="showScreen('results-screen')">Back to Results</button>
        </div>

        <!-- Navigation -->
        <div class="navigation" id="navigation">
            <div class="nav-item active" onclick="showScreen('welcome-screen')">
                <div>üîç</div>
                <div>Search</div>
            </div>
            <div class="nav-item" onclick="showScreen('results-screen')">
                <div>üìç</div>
                <div>Nearby</div>
            </div>
            <div class="nav-item" onclick="showScreen('favorites-screen')">
                <div>‚ù§Ô∏è</div>
                <div>Favorites</div>
            </div>
            <div class="nav-item" onclick="showScreen('faq-screen')">
                <div>‚ùì</div>
                <div>FAQ</div>
            </div>
        </div>
    </div>

    <script>
        // App state variables
        let currentSearchTerm = '';
        let currentRating = 0;
        let currentItem = null;
        let favorites = new Set();
        let currentResults = [];

        // Sample restaurant data
        const restaurantData = {
            taco: [
                { id: 1, restaurant: "El Coraz√≥n", distance: "0.2 mi", rating: 4.8, reviewCount: 23, price: "$2.50", recentReview: "Authentic carnitas, perfect seasoning!", emoji: "üåÆ" },
                { id: 2, restaurant: "Tacos El G√ºero", distance: "0.4 mi", rating: 4.6, reviewCount: 18, price: "$3.00", recentReview: "Best fish tacos in the neighborhood", emoji: "üåÆ" },
                { id: 3, restaurant: "La Cocina", distance: "0.6 mi", rating: 4.9, reviewCount: 31, price: "$2.75", recentReview: "Al pastor is incredible here", emoji: "üåÆ" }
            ],
            pizza: [
                { id: 4, restaurant: "Tony's Pizza", distance: "0.1 mi", rating: 4.7, reviewCount: 45, price: "$3.25", recentReview: "Perfect NY-style slice", emoji: "üçï" },
                { id: 5, restaurant: "Artisan Slice", distance: "0.3 mi", rating: 4.5, reviewCount: 22, price: "$4.50", recentReview: "Creative toppings, great crust", emoji: "üçï" }
            ],
            coffee: [
                { id: 6, restaurant: "Blue Bottle Coffee", distance: "0.2 mi", rating: 4.6, reviewCount: 67, price: "$4.50", recentReview: "Smooth espresso, perfect foam", emoji: "‚òï" }
            ],
            burger: [
                { id: 7, restaurant: "Burger Joint", distance: "0.3 mi", rating: 4.4, reviewCount: 89, price: "$8.50", recentReview: "Juicy patty, great bun", emoji: "üçî" }
            ],
            sushi: [
                { id: 8, restaurant: "Sushi Zen", distance: "0.5 mi", rating: 4.8, reviewCount: 156, price: "$12.00", recentReview: "Fresh fish, perfect rice", emoji: "üç£" }
            ],
            wings: [
                { id: 9, restaurant: "Wing Stop", distance: "0.4 mi", rating: 4.3, reviewCount: 78, price: "$6.50", recentReview: "Crispy wings, great sauce variety", emoji: "üçó" }
            ]
        };

        // Sample reviews data
        const reviewsData = {
            1: [
                { name: "Maria L.", date: "2 days ago", rating: 5, text: "Amazing carnitas taco! Meat was perfectly seasoned and the tortilla was fresh and warm." },
                { name: "Carlos R.", date: "1 week ago", rating: 4, text: "Really good, though the salsa verde could be a bit spicier for my taste." },
                { name: "Sofia M.", date: "2 weeks ago", rating: 5, text: "I come here every Tuesday for taco night. Consistently excellent quality." }
            ]
        };

        // Main app functions
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');

            const navigation = document.getElementById('navigation');
            if (['welcome-screen', 'results-screen', 'favorites-screen', 'faq-screen'].includes(screenId)) {
                navigation.style.display = 'flex';
            } else {
                navigation.style.display = 'none';
            }

            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            if (screenId === 'welcome-screen') {
                document.querySelector('.nav-item').classList.add('active');
            } else if (screenId === 'results-screen') {
                document.querySelectorAll('.nav-item')[1].classList.add('active');
            } else if (screenId === 'favorites-screen') {
                document.querySelectorAll('.nav-item')[2].classList.add('active');
            } else if (screenId === 'faq-screen') {
                document.querySelectorAll('.nav-item')[3].classList.add('active');
            }

            if (screenId === 'favorites-screen') {
                updateFavoritesDisplay();
            }
        }

        function performSearch() {
            const searchTerm = document.getElementById('welcome-search').value.toLowerCase().trim() || 'taco';
            let category = searchTerm;
            if (searchTerm.includes('taco')) category = 'taco';
            else if (searchTerm.includes('pizza')) category = 'pizza';
            else if (searchTerm.includes('coffee')) category = 'coffee';
            else if (searchTerm.includes('burger')) category = 'burger';
            else if (searchTerm.includes('sushi')) category = 'sushi';
            else if (searchTerm.includes('wing')) category = 'wings';
            else category = 'taco';
            searchCategory(category);
        }

        function searchCategory(category) {
            currentSearchTerm = category;
            const results = restaurantData[category] || restaurantData.taco;
            currentResults = [...results];
            
            document.getElementById('results-title').textContent = `${category.charAt(0).toUpperCase() + category.slice(1)}s near you`;
            document.getElementById('results-subtitle').textContent = `Found ${results.length} places with highly rated ${category}s`;
            
            displayResults(currentResults);
            showScreen('results-screen');
        }

        function displayResults(results) {
            const container = document.getElementById('results-container');
            container.innerHTML = results.map(item => `
                <div class="result-card" onclick="showItemDetail(${item.id})">
                    <div class="result-header">
                        <div>
                            <div class="restaurant-name">${item.restaurant}</div>
                            <div class="distance">${item.distance}</div>
                        </div>
                        <div class="rating-container">
                            <div class="stars">${'‚òÖ'.repeat(Math.floor(item.rating))}${item.rating % 1 ? '‚òÜ' : ''}</div>
                            <div class="rating-text">${item.rating} (${item.reviewCount})</div>
                        </div>
                    </div>
                    <div class="item-info">
                        <div class="item-name">${currentSearchTerm.charAt(0).toUpperCase() + currentSearchTerm.slice(1)}</div>
                        <div class="item-price">${item.price}</div>
                    </div>
                    <div class="recent-review">"${item.recentReview}"</div>
                </div>
            `).join('');
        }

        function filterResults(filterType) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            let sortedResults = [...currentResults];
            
            switch(filterType) {
                case 'rating':
                    sortedResults.sort((a, b) => b.rating - a.rating);
                    break;
                case 'price':
                    sortedResults.sort((a, b) => parseFloat(a.price.slice(1)) - parseFloat(b.price.slice(1)));
                    break;
                case 'distance':
                    sortedResults.sort((a, b) => parseFloat(a.distance) - parseFloat(b.distance));
                    break;
            }
            
            displayResults(sortedResults);
        }

        function showItemDetail(itemId) {
            const allItems = Object.values(restaurantData).flat();
            const item = allItems.find(i => i.id === itemId);
            
            if (item) {
                currentItem = item;
                document.getElementById('detail-image').textContent = item.emoji;
                document.getElementById('detail-title').textContent = currentSearchTerm.charAt(0).toUpperCase() + currentSearchTerm.slice(1);
                document.getElementById('detail-subtitle').textContent = `at ${item.restaurant}`;
                document.getElementById('detail-rating').textContent = item.rating;
                document.getElementById('detail-price').textContent = item.price;
                document.getElementById('detail-reviews').textContent = item.reviewCount;
                
                const favoriteBtn = document.getElementById('favorite-btn');
                favoriteBtn.textContent = favorites.has(itemId) ? '‚ù§Ô∏è' : 'ü§ç';
                
                document.getElementById('rating-item-name').textContent = currentSearchTerm.charAt(0).toUpperCase() + currentSearchTerm.slice(1);
                document.getElementById('rating-restaurant-name').textContent = item.restaurant;
                
                const reviewsContainer = document.getElementById('reviews-container');
                const itemReviews = reviewsData[itemId] || [];
                reviewsContainer.innerHTML = itemReviews.map(review => `
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer-name">${review.name}</div>
                            <div class="review-date">${review.date}</div>
                        </div>
                        <div class="rating-container" style="margin-bottom: 8px;">
                            <div class="stars">${'‚òÖ'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}</div>
                        </div>
                        <div class="review-text">${review.text}</div>
                    </div>
                `).join('');
                
                showScreen('detail-screen');
            }
        }

        function toggleFavorite() {
            if (!currentItem) return;
            
            const favoriteBtn = document.getElementById('favorite-btn');
            
            if (favorites.has(currentItem.id)) {
                favorites.delete(currentItem.id);
                favoriteBtn.textContent = 'ü§ç';
            } else {
                favorites.add(currentItem.id);
                favoriteBtn.textContent = '‚ù§Ô∏è';
            }
        }

        function updateFavoritesDisplay() {
            const favoritesContainer = document.getElementById('favorites-container');
            const favoritesEmpty = document.getElementById('favorites-empty');
            
            if (favorites.size === 0) {
                favoritesEmpty.style.display = 'block';
                favoritesContainer.style.display = 'none';
            } else {
                favoritesEmpty.style.display = 'none';
                favoritesContainer.style.display = 'block';
                
                const allItems = Object.values(restaurantData).flat();
                const favoriteItems = allItems.filter(item => favorites.has(item.id));
                
                favoritesContainer.innerHTML = favoriteItems.map(item => `
                    <div class="favorite-card" onclick="showItemDetail(${item.id})">
                        <div class="favorite-header">
                            <div class="favorite-emoji">${item.emoji}</div>
                            <div class="favorite-info">
                                <div class="favorite-name">${Object.keys(restaurantData).find(key => restaurantData[key].some(i => i.id === item.id))?.charAt(0).toUpperCase() + Object.keys(restaurantData).find(key => restaurantData[key].some(i => i.id === item.id))?.slice(1) || 'Item'}</div>
                                <div class="favorite-restaurant">at ${item.restaurant}</div>
                            </div>
                            <button class="heart-btn" onclick="event.stopPropagation(); toggleFavoriteFromList(${item.id})">‚ù§Ô∏è</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function toggleFavoriteFromList(itemId) {
            favorites.delete(itemId);
            updateFavoritesDisplay();
        }

        // Star rating functionality
        document.getElementById('star-rating').addEventListener('click', function(e) {
            if (e.target.classList.contains('star')) {
                currentRating = parseInt(e.target.dataset.rating);
                updateStarDisplay();
                document.getElementById('submit-rating').disabled = false;
            }
        });

        function updateStarDisplay() {
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < currentRating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function selectPhoto() {
            alert('Photo selection would open camera/gallery in a real app');
        }

        function submitRating() {
            if (currentRating > 0) {
                showScreen('success-screen');
                currentRating = 0;
                updateStarDisplay();
                document.getElementById('review-text').value = '';
                document.getElementById('submit-rating').disabled = true;
            }
        }

        function getDirections() {
            alert('This would open maps with directions in a real app');
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('welcome-search').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            document.getElementById('navigation').style.display = 'flex';
        });
    </script>
</body>
</html>
